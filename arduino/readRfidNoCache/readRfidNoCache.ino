// Green and white wires plugged into digital pins 2 and 3
// (red wire into 5v, black wire into ground)
// If you are having issues, try jiggling the wires!
char whtPin = 2;
char grnPin = 3;
void setup() {
  pinMode(whtPin, INPUT);
  pinMode(grnPin, INPUT);
  // To recive data, open your serial monitor
  // and set the baud rate to 9600
  Serial.begin(9600);
  Serial.println("Arduino listening...");
}

// Count of the current retrivial (-1 = not recieving bits currently)
int recieveCount = -1;
void loop() {

  readScanner();
  readPython();
 
}

void readScanner() {
  // Read in the values from the green / white wires
  int white = digitalRead(2);
  int green = digitalRead(3);

  // If we recieved a bit, write it
  if (white != 1 or green != 1) {
    Serial.print(green);
    // Set to currently recieving
    recieveCount = 0;
  }

  // If currently recieving, increase count
  if (recieveCount >= 0) {
    recieveCount ++;
  }
  // if we havent recieved bits in a while, end
  if (recieveCount > 30000) {
    Serial.println("");
    recieveCount = -1;
  }
}

void readPython() {
  if (Serial.available() > 0) {
    // Read in 7 bytes
    byte in[7];
     Serial.readBytes(in, 7);

    Serial.print("print going to wall: ");
    for(int i=0; i<sizeof(in); i++) {
      Serial.print(in[i]);
    }
    Serial.println();
  }
}

void writeToWall() {
  
}

